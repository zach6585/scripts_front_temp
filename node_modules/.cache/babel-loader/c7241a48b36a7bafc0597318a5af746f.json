{"ast":null,"code":"import { TEXTS_LOADING, TEXTS_SUCCESS } from '../actions/text';\nconst initialState = {\n  loading: false,\n  error: \"\",\n  changesFromCurrentScript: null,\n  currentScript: \"\"\n};\nexport function changeReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  /*\r\n  This reducer will do two things: \r\n  1) Will update the changed p/h1/etc. values saved to the store so that we don't have to make multiple axios calls and \r\n  2) Will get the initial changed p/h1/etc. needed in store so that we only have to look through texts with the same script so the time checking isn't as long\r\n  Initial state will be all of the texts that are gotten through axios.\r\n  */\n  switch (action.type) {\n    //Number 2 from above are accomplished through LOADING and SUCCESS\n    case TEXTS_LOADING:\n      return { ...state,\n        loading: true,\n        err: '',\n        curatedTextsFromCurrentScript: null\n      };\n\n    case TEXTS_SUCCESS:\n      return { ...state,\n        loading: false,\n        err: '',\n        curatedTextsFromCurrentScript: action.payload.texts,\n        currentScript: action.payload.script_number\n      };\n\n    case 'TEXT_UPDATED':\n      //Number 1 from above\n      return { ...state,\n        curatedTextsFromCurrentScript: state.curatedTextsFromCurrentScript.map(element => element.id_tag === action.payload.id_tag ? { ...element,\n          value: action.payload.value\n        } : element)\n      };\n    //Here we will have to have given the action a new text value which would be easy to get\n\n    case 'TEXT_CREATED':\n      //Also number 1 from above but for posting instead of patching\n      return { ...state,\n        curatedTextsFromCurrentScript: [...state.curatedTextsFromCurrentScript, action.payload]\n      };\n\n    case 'CHANGE_SCRIPT':\n      return { ...state,\n        curatedTextsFromCurrentScript: null,\n        currentScript: \"\"\n      };\n\n    default:\n      // If the reducer doesn't care about this action type,\n      // return the existing state unchanged\n      return state;\n  }\n}","map":{"version":3,"sources":["/mnt/c/Users/moust/Documents/Scripts/frontend/src/reducers/changereducer.js"],"names":["TEXTS_LOADING","TEXTS_SUCCESS","initialState","loading","error","changesFromCurrentScript","currentScript","changeReducer","state","action","type","err","curatedTextsFromCurrentScript","payload","texts","script_number","map","element","id_tag","value"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,aAAxB,QAA6C,iBAA7C;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE,KADU;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnBC,EAAAA,wBAAwB,EAAE,IAHP;AAInBC,EAAAA,aAAa,EAAE;AAJI,CAArB;AAOA,OAAO,SAASC,aAAT,GAAqD;AAAA,MAA9BC,KAA8B,uEAAtBN,YAAsB;AAAA,MAARO,MAAQ;;AACxD;AACJ;AACA;AACA;AACA;AACA;AACI,UAAQA,MAAM,CAACC,IAAf;AACE;AACA,SAAKV,aAAL;AACE,aAAO,EACL,GAAGQ,KADE;AAELL,QAAAA,OAAO,EAAE,IAFJ;AAGLQ,QAAAA,GAAG,EAAE,EAHA;AAILC,QAAAA,6BAA6B,EAAE;AAJ1B,OAAP;;AAOF,SAAKX,aAAL;AACE,aAAO,EACL,GAAGO,KADE;AAELL,QAAAA,OAAO,EAAE,KAFJ;AAGLQ,QAAAA,GAAG,EAAE,EAHA;AAILC,QAAAA,6BAA6B,EAAEH,MAAM,CAACI,OAAP,CAAeC,KAJzC;AAKLR,QAAAA,aAAa,EAAEG,MAAM,CAACI,OAAP,CAAeE;AALzB,OAAP;;AAQF,SAAK,cAAL;AAAqB;AACnB,aAAO,EACL,GAAGP,KADE;AAELI,QAAAA,6BAA6B,EAAEJ,KAAK,CAACI,6BAAN,CAAoCI,GAApC,CAAwCC,OAAO,IAC5EA,OAAO,CAACC,MAAR,KAAmBT,MAAM,CAACI,OAAP,CAAeK,MAAlC,GAA2C,EAAC,GAAGD,OAAJ;AAAaE,UAAAA,KAAK,EAAEV,MAAM,CAACI,OAAP,CAAeM;AAAnC,SAA3C,GAAuFF,OAD1D;AAF1B,OAAP;AAIG;;AAEH,SAAK,cAAL;AAAqB;AACrB,aAAO,EACL,GAAGT,KADE;AAELI,QAAAA,6BAA6B,EAAE,CAAC,GAAGJ,KAAK,CAACI,6BAAV,EAAyCH,MAAM,CAACI,OAAhD;AAF1B,OAAP;;AAKA,SAAK,eAAL;AACA,aAAM,EACJ,GAAGL,KADC;AAEJI,QAAAA,6BAA6B,EAAE,IAF3B;AAGJN,QAAAA,aAAa,EAAE;AAHX,OAAN;;AAMF;AACE;AACA;AACA,aAAOE,KAAP;AA1CJ;AA4CD","sourcesContent":["import { TEXTS_LOADING, TEXTS_SUCCESS } from '../actions/text';\r\nconst initialState = {\r\n  loading: false,\r\n  error: \"\",\r\n  changesFromCurrentScript: null,\r\n  currentScript: \"\"\r\n}\r\n\r\nexport function changeReducer(state = initialState, action) {\r\n    /*\r\n    This reducer will do two things: \r\n    1) Will update the changed p/h1/etc. values saved to the store so that we don't have to make multiple axios calls and \r\n    2) Will get the initial changed p/h1/etc. needed in store so that we only have to look through texts with the same script so the time checking isn't as long\r\n    Initial state will be all of the texts that are gotten through axios.\r\n    */\r\n    switch (action.type) {\r\n      //Number 2 from above are accomplished through LOADING and SUCCESS\r\n      case TEXTS_LOADING:\r\n        return {\r\n          ...state,\r\n          loading: true,\r\n          err: '',\r\n          curatedTextsFromCurrentScript: null\r\n\r\n        }\r\n      case TEXTS_SUCCESS:\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          err: '',\r\n          curatedTextsFromCurrentScript: action.payload.texts,\r\n          currentScript: action.payload.script_number\r\n        }\r\n\r\n      case 'TEXT_UPDATED': //Number 1 from above\r\n        return {\r\n          ...state,\r\n          curatedTextsFromCurrentScript: state.curatedTextsFromCurrentScript.map(element => \r\n            element.id_tag === action.payload.id_tag ? {...element, value: action.payload.value} : element)\r\n         } //Here we will have to have given the action a new text value which would be easy to get\r\n      \r\n        case 'TEXT_CREATED': //Also number 1 from above but for posting instead of patching\r\n        return {\r\n          ...state, \r\n          curatedTextsFromCurrentScript: [...state.curatedTextsFromCurrentScript, action.payload]\r\n        }\r\n      \r\n        case 'CHANGE_SCRIPT':\r\n        return{\r\n          ...state,\r\n          curatedTextsFromCurrentScript: null,\r\n          currentScript: \"\"\r\n        }\r\n      \r\n      default:\r\n        // If the reducer doesn't care about this action type,\r\n        // return the existing state unchanged\r\n        return state\r\n    }\r\n  }\r\n\r\n"]},"metadata":{},"sourceType":"module"}